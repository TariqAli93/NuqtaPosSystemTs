<div dir="rtl" lang="ar">

# دليل استخدام نظام نقطة بلس (Nuqta Plus)

## نظام تخطيط موارد المؤسسة ونقاط البيع — ERP + POS

**الإصدار:** 1.0  
**آخر تحديث:** فبراير 2026  
**حقوق النشر:** © Nuqta Plus — جميع الحقوق محفوظة

---

## فهرس المحتويات

1. [مقدمة](#1-مقدمة)
2. [التثبيت والإعداد الأولي](#2-التثبيت-والإعداد-الأولي)
3. [إدارة المستخدمين والصلاحيات](#3-إدارة-المستخدمين-والصلاحيات)
4. [إعدادات النظام](#4-إعدادات-النظام)
5. [إدارة المنتجات](#5-إدارة-المنتجات)
6. [إدارة المخزون](#6-إدارة-المخزون)
7. [المشتريات](#7-المشتريات)
8. [المبيعات ونقطة البيع](#8-المبيعات-ونقطة-البيع)
9. [الإلغاء والاسترجاع](#9-الإلغاء-والاسترجاع)
10. [المحاسبة](#10-المحاسبة)
11. [العملاء والموردون](#11-العملاء-والموردون)
12. [نظام الباركود](#12-نظام-الباركود)
13. [التقارير ولوحة التحكم](#13-التقارير-ولوحة-التحكم)
14. [سجل التدقيق](#14-سجل-التدقيق)
15. [النسخ الاحتياطي والاستعادة](#15-النسخ-الاحتياطي-والاستعادة)
16. [الأخطاء الشائعة وحلولها](#16-الأخطاء-الشائعة-وحلولها)
17. [أفضل الممارسات التشغيلية](#17-أفضل-الممارسات-التشغيلية)
18. [الأسئلة المتكررة](#18-الأسئلة-المتكررة)

---

## 1. مقدمة

### 1.1 ما هو نظام نقطة بلس؟

نقطة بلس هو نظام متكامل لتخطيط موارد المؤسسة (ERP) مع نقطة بيع (POS) مصمم خصيصاً للسوق العراقي والعربي. يعمل النظام كتطبيق سطح مكتب مستقل بدون الحاجة لاتصال دائم بالإنترنت، ويعتمد على قاعدة بيانات محلية مما يضمن سرعة الأداء وأمان البيانات.

يدعم النظام العملة العراقية (الدينار العراقي — IQD) كعملة أساسية مع إمكانية التعامل بعملات متعددة، ويستخدم نظام الأعداد الصحيحة في جميع العمليات المالية لتجنب أخطاء التقريب العشري.

### 1.2 الفئات المستهدفة

| الفئة                      | الاستخدام الرئيسي                                                     |
| -------------------------- | --------------------------------------------------------------------- |
| **صاحب المتجر / المدير**   | إدارة شاملة: المنتجات، التقارير، المحاسبة، الإعدادات، النسخ الاحتياطي |
| **الكاشير (أمين الصندوق)** | عمليات البيع اليومية عبر نقطة البيع، استلام المدفوعات                 |
| **المحاسب**                | القيود المحاسبية، الترحيل، التقارير المالية، ميزان المراجعة           |
| **المشرف**                 | متابعة المبيعات، إدارة المنتجات والعملاء، مراجعة التقارير             |
| **المراقب**                | الاطلاع على البيانات بصلاحية قراءة فقط                                |

### 1.3 الفرق بين نقطة بيع بسيطة ونظام ERP

نقطة البيع البسيطة تقتصر على تسجيل عملية البيع وطباعة الإيصال. أما نظام نقطة بلس فيقدم:

- **نظام دفعات (Batches):** كل كمية تدخل المخزون تُسجَّل كدفعة مستقلة بتاريخ صلاحية وسعر كلفة خاص بها.
- **نظام FIFO (الوارد أولاً يُصرَف أولاً):** عند البيع، يُخصم المخزون تلقائياً من أقدم دفعة أولاً، مما يضمن دقة حساب تكلفة البضاعة المباعة.
- **قيود محاسبية تلقائية:** كل عملية بيع أو شراء أو تعديل مخزون تُنشئ قيداً محاسبياً مزدوجاً (مدين ودائن) تلقائياً.
- **سجل تدقيق شامل:** كل إجراء يقوم به أي مستخدم يُسجَّل بالتاريخ والوقت والتفاصيل.
- **إدارة ذمم العملاء والموردين:** تتبع الديون والمدفوعات لكل عميل ومورد بسجل مفصل.

### 1.4 المفاهيم الأساسية

| المفهوم                                 | الشرح                                                                                            |
| --------------------------------------- | ------------------------------------------------------------------------------------------------ |
| **الدفعة (Batch)**                      | كمية من منتج معين دخلت المخزون في وقت واحد، ولها سعر كلفة وتاريخ صلاحية خاص                      |
| **FIFO**                                | آلية الصرف: «الوارد أولاً يُصرَف أولاً» — عند البيع تُستهلك أقدم الدفعات أولاً                   |
| **القيد المحاسبي**                      | تسجيل مزدوج: كل عملية مالية تسجل كمبلغ مدين في حساب ومبلغ دائن في حساب آخر بحيث يتساوى المجموعان |
| **الترحيل (Posting)**                   | نقل القيود من حالة المسودة إلى حالة المرحّل النهائي لفترة محاسبية محددة                          |
| **سجل التدقيق (Audit Log)**             | سجل يحفظ كل إجراء وتعديل بالنظام مع بيانات المستخدم والتوقيت                                     |
| **مفتاح منع التكرار (Idempotency Key)** | آلية تضمن عدم تنفيذ نفس العملية مرتين حتى في حالة انقطاع الاتصال                                 |

---

## 2. التثبيت والإعداد الأولي

### 2.1 تشغيل النظام لأول مرة

عند تشغيل نظام نقطة بلس للمرة الأولى:

1. **إنشاء قاعدة البيانات:** يقوم النظام تلقائياً بإنشاء قاعدة بيانات محلية في مجلد بيانات التطبيق على جهازك.
2. **تشغيل التحديثات:** يتم تطبيق جميع تحديثات هيكل قاعدة البيانات تلقائياً.
3. **فحص السلامة:** يجري النظام فحصاً لسلامة قاعدة البيانات عند كل تشغيل.

### 2.2 معالج الإعداد الأولي

عند أول تشغيل، يظهر معالج الإعداد الذي يرشدك خلال الخطوات التالية:

**الخطوة الأولى — إنشاء المستخدم الأول:**

- أدخل اسم المستخدم (مثال: admin)
- أدخل كلمة مرور قوية
- أدخل الاسم الكامل
- يُمنح المستخدم الأول صلاحيات المدير (admin) تلقائياً

**الخطوة الثانية — معلومات الشركة:**

- اسم الشركة أو المتجر (مطلوب)
- العنوان ورقم الهاتف والبريد الإلكتروني
- الرقم الضريبي (إن وُجد)
- اختيار العملة الأساسية (الافتراضي: الدينار العراقي)
- تحديد حد التنبيه للمخزون المنخفض

**الخطوة الثالثة — تفعيل الوحدات:**

| الوحدة               | الوصف                                            | الافتراضي |
| -------------------- | ------------------------------------------------ | --------- |
| المحاسبة             | القيود والتقارير المالية                         | معطّل     |
| المشتريات            | فواتير الشراء وإدارة الموردين                    | مفعّل     |
| سجلات الذمم          | كشف حساب العملاء والموردين                       | مفعّل     |
| الوحدات المتعددة     | دعم التعبئة والتغليف المتعدد (كرتون، علبة، قطعة) | معطّل     |
| الدفعات على الفواتير | تسجيل دفعات جزئية على الفواتير                   | مفعّل     |

**الخطوة الرابعة — إعدادات الفواتير:**

- اختيار حجم الورق (حراري / A4 / A5)
- بادئة رقم الفاتورة (الافتراضي: INV)
- اتجاه التخطيط (من اليمين لليسار أو العكس)
- إظهار رمز الاستجابة السريعة (QR) على الإيصال

### 2.3 اختيار الطابعة

لاختيار طابعة الإيصالات:

1. انتقل إلى **الإعدادات** ← تبويب **إعدادات النظام**.
2. في حقل «طابعة الإيصالات» ستظهر قائمة بجميع الطابعات المتصلة بجهازك.
3. اختر الطابعة الحرارية المناسبة.
4. اضغط **حفظ**.

> **ملاحظة:** يدعم النظام الطابعات الحرارية بعرض 58 مم و 80 مم.

---

## 3. إدارة المستخدمين والصلاحيات

### 3.1 الأدوار المتاحة

يتضمن النظام أربعة أدوار رئيسية بصلاحيات متدرجة:

| الدور       | بالإنجليزية | الوصف                                                                                  |
| ----------- | ----------- | -------------------------------------------------------------------------------------- |
| **المدير**  | Admin       | صلاحيات كاملة — جميع العمليات بلا استثناء                                              |
| **المشرف**  | Manager     | إدارة المبيعات والمنتجات والعملاء والتقارير — بدون إدارة المستخدمين أو النسخ الاحتياطي |
| **الكاشير** | Cashier     | العمليات اليومية: البيع، استلام الدفعات، إدارة العملاء                                 |
| **المراقب** | Viewer      | قراءة فقط: الاطلاع على البيانات دون أي تعديل                                           |

### 3.2 جدول الصلاحيات التفصيلي

| الصلاحية                   | المدير | المشرف | الكاشير | المراقب |
| -------------------------- | :----: | :----: | :-----: | :-----: |
| إنشاء عملية بيع            |   ✓    |   ✓    |    ✓    |         |
| عرض المبيعات               |   ✓    |   ✓    |    ✓    |    ✓    |
| إلغاء أو استرجاع بيع       |   ✓    |   ✓    |         |         |
| تسجيل دفعة على فاتورة      |   ✓    |   ✓    |    ✓    |         |
| إنشاء / تعديل / حذف منتج   |   ✓    |   ✓    |         |         |
| عرض المنتجات               |   ✓    |   ✓    |    ✓    |    ✓    |
| إنشاء / تعديل عميل         |   ✓    |   ✓    |    ✓    |         |
| حذف عميل                   |   ✓    |   ✓    |         |         |
| إدارة التصنيفات            |   ✓    |   ✓    |         |         |
| إدارة المستخدمين           |   ✓    |        |         |         |
| تعديل الإعدادات            |   ✓    |        |         |         |
| عرض الإعدادات              |   ✓    |   ✓    |         |         |
| النسخ الاحتياطي والاستعادة |   ✓    |        |         |         |
| سجل التدقيق                |   ✓    |   ✓    |         |         |
| لوحة التحكم                |   ✓    |   ✓    |    ✓    |    ✓    |

### 3.3 إنشاء مستخدم جديد

> هذه العملية متاحة فقط لدور **المدير**.

1. انتقل إلى **الإعدادات** ← تبويب **المستخدمين**.
2. اضغط زر **إضافة مستخدم**.
3. أدخل البيانات التالية:
   - **اسم المستخدم** — فريد، يُستخدم لتسجيل الدخول
   - **كلمة المرور** — يجب أن تكون قوية
   - **الاسم الكامل** — يظهر في النظام والتقارير
   - **الدور** — اختر من القائمة (مدير، مشرف، كاشير، مراقب)
   - **رقم الهاتف** — اختياري
4. اضغط **حفظ**.

### 3.4 تعديل مستخدم وإلغاء التفعيل

- لتعديل بيانات مستخدم: افتح قائمة المستخدمين، اضغط على زر **تعديل** بجانب المستخدم.
- لإلغاء وصول مستخدم: غيّر حالة **نشط** إلى **معطّل**. لن يتمكن المستخدم من تسجيل الدخول بعدها.

> **تنبيه أمني:** لا يمكن حذف المستخدم الذي أنشأ عمليات في النظام. بدلاً من ذلك، ألغِ تفعيله.

---

## 4. إعدادات النظام

يمكن الوصول إلى الإعدادات من القائمة الجانبية ← **الإعدادات**. تنقسم الإعدادات إلى خمسة تبويبات:

### 4.1 إعدادات النظام العامة

| الإعداد                  | الوصف                                                    |
| ------------------------ | -------------------------------------------------------- |
| اسم الشركة               | يظهر على الإيصالات والتقارير                             |
| البريد الإلكتروني        | بريد الشركة الرسمي                                       |
| رقم الهاتف الأول والثاني | أرقام التواصل                                            |
| العنوان                  | عنوان المتجر أو المقر                                    |
| الرقم الضريبي            | الرقم الضريبي للجهات الرسمية                             |
| العملة الأساسية          | العملة المعتمدة للعمليات المالية (IQD، USD، EUR، وغيرها) |
| حد المخزون المنخفض       | عدد الوحدات الذي يُفعّل تنبيه نقص المخزون (الافتراضي: 5) |
| طابعة الإيصالات          | اختيار الطابعة الحرارية من الطابعات المتصلة              |

### 4.2 إعدادات نقطة البيع

| الإعداد                 | الوصف                                                  |
| ----------------------- | ------------------------------------------------------ |
| تفعيل ماسح الباركود     | تفعيل استقبال المسح الضوئي في شاشة البيع               |
| إضافة تلقائية عند المسح | إضافة المنتج مباشرة إلى السلة عند مسحه                 |
| إظهار تنبيه المخزون     | عرض تنبيه عندما تتجاوز الكمية المطلوبة المخزون المتوفر |
| نسبة الضريبة الافتراضية | نسبة الضريبة المطبقة تلقائياً على كل عملية بيع         |
| طريقة الدفع الافتراضية  | نقداً أو مختلط                                         |

### 4.3 إعدادات المحاسبة

| الإعداد                 | الوصف                                                |
| ----------------------- | ---------------------------------------------------- |
| ترحيل تلقائي عند البيع  | إنشاء القيد المحاسبي تلقائياً عند كل عملية بيع       |
| ترحيل تلقائي عند الشراء | إنشاء القيد المحاسبي تلقائياً عند كل عملية شراء      |
| فرض توازن القيود        | منع حفظ أي قيد غير متوازن (مدين ≠ دائن)              |
| طريقة حساب التكلفة      | FIFO (الوارد أولاً يصرف أولاً) أو المتوسط المرجح     |
| بداية السنة المالية     | الشهر الذي تبدأ فيه السنة المالية (الافتراضي: يناير) |

### 4.4 إعدادات الباركود

| الإعداد                | الوصف                                     |
| ---------------------- | ----------------------------------------- |
| الصيغة الافتراضية      | EAN-13، EAN-8، Code 128، Code 39، أو QR   |
| بادئة الباركود         | نص يضاف في بداية كل باركود يُنشأ تلقائياً |
| عرض الملصق (مم)        | عرض ملصق الباركود بالمليمتر (20–200)      |
| ارتفاع الملصق (مم)     | ارتفاع ملصق الباركود بالمليمتر (10–100)   |
| إظهار السعر على الملصق | عرض سعر البيع على ملصق الباركود           |
| إظهار اسم المنتج       | عرض اسم المنتج على ملصق الباركود          |

### 4.5 إدارة المستخدمين (ضمن الإعدادات)

يتضمن التبويب الخامس واجهة إدارة المستخدمين الكاملة (راجع القسم 3).

---

## 5. إدارة المنتجات

### 5.1 إنشاء منتج جديد

1. انتقل إلى **المنتجات** ← **إضافة منتج**.
2. أدخل البيانات التالية:

| الحقل               | مطلوب؟ | الوصف                                      |
| ------------------- | :----: | ------------------------------------------ |
| اسم المنتج          |   ✓    | الاسم الذي يظهر في جميع الواجهات والتقارير |
| رمز المنتج (SKU)    |        | رمز فريد داخلي لتعريف المنتج               |
| الباركود            |        | رقم الباركود المطبوع على المنتج            |
| التصنيف             |        | التصنيف الذي ينتمي إليه المنتج             |
| سعر الكلفة          |        | سعر الشراء بالدينار العراقي (عدد صحيح)     |
| سعر البيع           |   ✓    | سعر البيع للعميل (عدد صحيح)                |
| المخزون الحالي      |        | الكمية المتوفرة حالياً                     |
| الحد الأدنى للمخزون |        | الكمية التي يظهر عندها تنبيه نقص المخزون   |
| الوحدة الأساسية     |        | وحدة القياس (قطعة، كيلو، متر، إلخ)         |
| المورد              |        | اسم المورد الأساسي                         |
| الحالة              |        | متوفر، نفد من المخزون، أو متوقف عن البيع   |
| نشط                 |        | هل المنتج فعال ويظهر في واجهة البيع؟       |
| الوصف               |        | وصف تفصيلي اختياري                         |

3. اضغط **حفظ**.

### 5.2 رمز المنتج (SKU) ومعناه

رمز المنتج (Stock Keeping Unit) هو معرّف فريد داخلي يستخدمه النظام والمتجر لتتبع كل منتج. يمكنك تعيينه يدوياً أو تركه فارغاً. مثال: `RICE-10KG`، `MILK-1L`.

يختلف عن الباركود في أن:

- **SKU** هو رمز داخلي تحدده أنت لاستخدامك.
- **الباركود** هو الرمز المطبوع على المنتج من المصنع ويُمسح بالماسح الضوئي.

### 5.3 الباركود

لكل منتج يمكن تسجيل رقم باركود واحد أو أكثر:

- باركود أساسي على مستوى المنتج.
- باركود إضافي لكل وحدة تعبئة (مثلاً باركود مختلف للكرتون وللقطعة المفردة).

عند مسح الباركود في شاشة البيع، يتعرف النظام على المنتج ويضيفه إلى السلة تلقائياً.

### 5.4 الوحدات المتعددة (التعبئة والتغليف)

إذا كان منتج يُباع بوحدات مختلفة (مثلاً: قطعة مفردة، علبة تحتوي 12 قطعة، كرتون يحتوي 48 قطعة)، يمكنك تعريف وحدات متعددة:

| الحقل         | الوصف                                                     |
| ------------- | --------------------------------------------------------- |
| اسم الوحدة    | مثل: علبة، كرتون، دزينة                                   |
| معامل التحويل | عدد الوحدات الأساسية في هذه الوحدة (مثل: كرتون = 48 قطعة) |
| سعر البيع     | سعر خاص لهذه الوحدة (اختياري)                             |
| الباركود      | باركود خاص بهذه الوحدة (اختياري)                          |

> **مثال عملي:** منتج «حليب 200 مل» وحدته الأساسية هي «قطعة». يمكنك تعريف وحدة «كرتون» بمعامل تحويل 24 (أي الكرتون يحتوي 24 قطعة). عند بيع كرتون واحد، يخصم النظام 24 قطعة من المخزون.

### 5.5 تتبع الصلاحية

عند تفعيل خاصية «يتبع الصلاحية» على المنتج:

- يتطلب النظام إدخال تاريخ انتهاء الصلاحية عند كل عملية شراء.
- تظهر تنبيهات المنتجات القريبة من انتهاء الصلاحية على لوحة التحكم.
- عند البيع، يستهلك النظام تلقائياً من الدفعة الأقرب لانتهاء الصلاحية أولاً.

### 5.6 تعديل المنتج

1. افتح قائمة المنتجات.
2. اضغط على اسم المنتج أو زر **التفاصيل**.
3. عدّل الحقول المطلوبة.
4. اضغط **حفظ**.

> **ملاحظة مهمة:** تعديل سعر الكلفة لا يغير كلفة الدفعات القائمة. الكلفة الجديدة تطبق فقط على الدفعات المستقبلية.

### 5.7 حذف المنتج

- يمكن حذف المنتجات التي ليس لها عمليات بيع أو شراء مرتبطة.
- المنتجات التي لها سجل عمليات لا يمكن حذفها، ولكن يمكن إلغاء تفعيلها حتى لا تظهر في واجهة البيع.

---

## 6. إدارة المخزون

### 6.1 مفهوم الدفعات (Batches)

كل كمية تدخل المخزون عبر الشراء أو التعديل اليدوي تُسجَّل كـ**دفعة** مستقلة. لكل دفعة:

| الخاصية         | الوصف                                       |
| --------------- | ------------------------------------------- |
| رقم الدفعة      | معرّف فريد (يُنشأ تلقائياً أو يُدخل يدوياً) |
| تاريخ الصلاحية  | تاريخ انتهاء صلاحية هذه الدفعة              |
| الكمية المستلمة | الكمية الأصلية التي دخلت المخزون            |
| الكمية المتوفرة | الكمية المتبقية حالياً                      |
| كلفة الوحدة     | سعر شراء الوحدة الواحدة في هذه الدفعة       |
| الحالة          | نشطة، نفدت، منتهية الصلاحية، أو مسحوبة      |

**لماذا الدفعات مهمة؟**

- حساب تكلفة البضاعة المباعة بدقة (كل دفعة لها كلفتها).
- تتبع الصلاحية بدقة (معرفة أي الكميات ستنتهي أولاً).
- عند الإلغاء أو الاسترجاع، يعود المخزون إلى نفس الدفعات الأصلية بالضبط.

### 6.2 الرصيد الافتتاحي

لتسجيل المخزون الموجود فعلياً قبل بدء استخدام النظام:

1. انتقل إلى **المخزون** ← **تعديل مخزون**.
2. اختر المنتج.
3. في حقل السبب اختر **رصيد افتتاحي**.
4. أدخل الكمية (عدد صحيح موجب).
5. اضغط **تطبيق**.

ما يحدث في الخلفية:

- يُنشأ **دفعة جديدة** بالكمية المحددة وبسعر كلفة المنتج.
- يُنشأ **حركة مخزون** من نوع تعديل بسبب «رصيد افتتاحي».
- يُحدَّث **رصيد المنتج** ليعكس مجموع الدفعات.
- يُنشأ **قيد محاسبي** يسجل زيادة قيمة المخزون.

### 6.3 تعديل المخزون

يُستخدم لتصحيح الكميات بسبب تلف، فقدان، خطأ في العد، أو أي سبب آخر:

1. انتقل إلى **المخزون** ← **تعديل مخزون**.
2. اختر المنتج.
3. اختر السبب:
   - **يدوي** — تعديل عام
   - **تالف** — المنتج تضرر
   - **رصيد افتتاحي** — كمية افتتاحية
4. أدخل الكمية: عدد **موجب** لزيادة المخزون، أو **سالب** لتخفيضه.
5. إذا كان المنتج يتبع الصلاحية، اختر الدفعة المحددة.
6. راجع **معاينة الأثر المحاسبي** التي تظهر القيد المتوقع.
7. اضغط **تطبيق**.

**قواعد مهمة:**

- التعديل الموجب (زيادة): يُنشئ دفعة جديدة إذا لم تحدد دفعة، أو يزيد كمية دفعة موجودة.
- التعديل السالب (نقص): يتطلب وجود دفعة بها كمية كافية. إذا لم تحدد دفعة، يبحث النظام عن أول دفعة نشطة بالكمية الكافية.

### 6.4 حركات المخزون

يسجل النظام كل حركة على المخزون تلقائياً. يمكنك مراجعة سجل الحركات من **المخزون** ← **حركات المخزون**.

أنواع الحركات:

| نوع الحركة     | السبب                     | مصدرها             |
| -------------- | ------------------------- | ------------------ |
| دخول (in)      | شراء                      | فاتورة شراء        |
| خروج (out)     | بيع                       | فاتورة بيع         |
| تعديل (adjust) | يدوي / تلف / رصيد افتتاحي | شاشة تعديل المخزون |
| دخول (in)      | استرجاع                   | إلغاء عملية بيع    |

لكل حركة يُسجَّل: المنتج، الدفعة، الكمية، الرصيد قبل وبعد، كلفة الوحدة، التكلفة الإجمالية، المستخدم الذي نفذ العملية، والتاريخ.

### 6.5 تنبيهات قرب انتهاء الصلاحية

يعرض النظام على لوحة التحكم قائمة بالمنتجات التي ستنتهي صلاحيتها خلال الفترة المحددة في الإعدادات (الافتراضي: 30 يوماً). هذا يساعدك على:

- عمل عروض تخفيض للمنتجات القريبة من الانتهاء.
- إعادة المنتجات للمورد قبل انتهائها.
- سحبها من الرفوف في الوقت المناسب.

### 6.6 مراجعة تطابق المخزون (Reconciliation)

أداة للتحقق من تطابق أرصدة المنتجات مع سجل الحركات الفعلي:

1. انتقل إلى **المخزون** ← **مراجعة التطابق**.
2. اضغط **فحص فقط** لمعاينة الفروقات دون تعديل.
3. يعرض النظام جدولاً يوضح لكل منتج:
   - الرصيد المسجل (المخزن مؤقتاً)
   - الرصيد الفعلي (المحسوب من الحركات)
   - الفرق بينهما
4. إذا وُجدت فروقات، اضغط **إصلاح الفروقات** لتصحيح الأرصدة المسجلة لتتطابق مع السجل الفعلي.

تظهر بطاقات ملخصة في الأعلى: إجمالي المنتجات، المنتجات ذات الفرق، إجمالي الفرق، عدد المنتجات المصححة.

---

## 7. المشتريات

### 7.1 إنشاء فاتورة شراء

1. انتقل إلى **المشتريات** ← **فاتورة شراء جديدة**.
2. أدخل بيانات الفاتورة:
   - **المورد** (مطلوب) — اختر من القائمة أو أنشئ مورداً جديداً.
   - **رقم الفاتورة** — رقم فاتورة المورد.
3. أضف بنود الشراء:

| الحقل          | الوصف                                          |
| -------------- | ---------------------------------------------- |
| المنتج         | اختر المنتج من القائمة                         |
| الوحدة         | الوحدة المستخدمة (قطعة، كرتون، إلخ)            |
| الكمية         | عدد الوحدات المشتراة                           |
| سعر الوحدة     | كلفة الوحدة الواحدة بالدينار العراقي           |
| رقم الدفعة     | رقم تعريف الدفعة (اختياري)                     |
| تاريخ الانتهاء | تاريخ صلاحية الدفعة (إلزامي للمنتجات المتتبعة) |
| المجموع        | يُحسب تلقائياً                                 |

4. حدد المبلغ المدفوع والخصم والضريبة.
5. اضغط **حفظ**.

### 7.2 ما يحدث في الخلفية عند إنشاء فاتورة شراء

عند حفظ فاتورة الشراء، ينفذ النظام تلقائياً:

1. **إنشاء سجل الفاتورة** — تُحفظ بيانات الفاتورة مع البنود.
2. **إنشاء الدفعات** — لكل بند يُنشأ دفعة جديدة في المخزون بالكمية والكلفة وتاريخ الصلاحية.
3. **تحديث المخزون** — يزداد رصيد كل منتج بالكمية المشتراة.
4. **تسجيل الدفعة المالية** — إذا دُفع مبلغ، يُسجَّل كدفعة على الفاتورة.
5. **قيد محاسبي** — يُنشأ قيد:
   - **مدين:** حساب المخزون (بقيمة الشراء)
   - **دائن:** حساب الصندوق (بالمبلغ المدفوع) + حساب ذمم الموردين (بالمبلغ المتبقي)
6. **كشف حساب المورد** — إذا بقي مبلغ مستحق، يُضاف كقيد في كشف حساب المورد.

### 7.3 تاريخ الانتهاء والإلزامية

- إذا كان المنتج معلّماً بخاصية «يتبع الصلاحية»، يصبح حقل تاريخ الانتهاء **إلزامياً** في فاتورة الشراء.
- لا يمكن حفظ الفاتورة بدون إدخال تاريخ الانتهاء لهذه المنتجات.
- هذا يضمن أن كل دفعة لها تاريخ صلاحية مسجل وأن نظام FIFO يعمل بدقة.

---

## 8. المبيعات ونقطة البيع

### 8.1 واجهة نقطة البيع (POS)

شاشة نقطة البيع مصممة للاستخدام السريع وتتكون من:

- **شريط البحث** — ابحث عن المنتج بالاسم أو الباركود، أو امسح الباركود بالماسح الضوئي.
- **شريط التصنيفات** — تصفية المنتجات حسب التصنيف.
- **شبكة المنتجات** — بطاقات تعرض المنتجات المتوفرة مع السعر والمخزون.
- **سلة المشتريات** — البنود المضافة مع إمكانية تعديل الكمية أو تغيير الوحدة أو الحذف.
- **لوحة المجاميع** — المجموع الفرعي، الخصم، الضريبة، والمجموع النهائي.
- **شريط الإجراءات** — أزرار: دفع، تعليق، خصم، عميل، ملاحظة، مسح السلة.

### 8.2 إنشاء عملية بيع

**الطريقة السريعة (نقطة البيع):**

1. افتح شاشة **نقطة البيع**.
2. أضف المنتجات بإحدى الطرق:
   - **مسح الباركود** بالماسح الضوئي.
   - **البحث** بالاسم أو الرمز في شريط البحث.
   - **الضغط** على بطاقة المنتج في الشبكة.
3. عدّل الكميات من سلة المشتريات (+ أو −).
4. اختر العميل إذا كان البيع بالآجل (اختياري).
5. أضف خصماً إذا لزم الأمر.
6. اضغط **دفع**.
7. في نافذة الدفع:
   - اختر طريقة الدفع (نقداً، آجل، مختلط).
   - أدخل المبلغ المدفوع.
   - اضغط **تأكيد**.
8. يُطبع الإيصال تلقائياً.

**الطريقة المفصلة (نموذج البيع):**

1. انتقل إلى **المبيعات** ← **فاتورة بيع جديدة**.
2. أدخل رقم الفاتورة واختر العميل.
3. أضف البنود مع تحديد الكمية وسعر البيع والخصم لكل بند.
4. حدد طريقة الدفع ونوع العملة والمبلغ المدفوع.
5. اضغط **إنشاء**.

### 8.3 طرق الدفع

| الطريقة           | الوصف                                            |
| ----------------- | ------------------------------------------------ |
| **نقداً (Cash)**  | يدفع العميل كامل المبلغ فوراً                    |
| **آجل (Credit)**  | يتطلب تحديد عميل؛ يُسجَّل المبلغ كدين على العميل |
| **مختلط (Mixed)** | دفع جزء نقداً والباقي آجل على العميل             |

عند البيع بالآجل أو المختلط:

- يتطلب النظام تحديد العميل.
- يمكن تطبيق فائدة (نسبة مئوية) على المبيعات الآجلة.
- يُسجَّل المبلغ المتبقي كذمة على العميل في كشف حسابه.

### 8.4 الدفعات الجزئية

للعمليات الآجلة أو المختلطة، يمكن تسجيل دفعات لاحقة:

1. افتح **المبيعات** ← اضغط على الفاتورة المطلوبة.
2. اضغط **تسجيل دفعة**.
3. أدخل المبلغ المدفوع واختر طريقة الدفع (نقد، بطاقة، تحويل بنكي).
4. اضغط **تأكيد**.

يُحدَّث الرصيد المتبقي تلقائياً ويُسجَّل في كشف حساب العميل.

### 8.5 طباعة الإيصال

- يُطبع الإيصال تلقائياً بعد إتمام عملية البيع على الطابعة الحرارية المحددة في الإعدادات.
- يتضمن الإيصال: اسم الشركة، بيانات التواصل، رقم الفاتورة، تاريخ العملية، بنود البيع، المجاميع، المبلغ المدفوع، المتبقي، واسم الكاشير.
- يمكن إعادة طباعة أي إيصال من شاشة تفاصيل البيع.

### 8.6 آلية FIFO في البيع

عند تنفيذ عملية بيع:

1. يتحقق النظام من توفر الكمية المطلوبة عبر فحص مجموع الدفعات النشطة.
2. يُخصم من أقدم دفعة أولاً حتى تُستنفد، ثم ينتقل للدفعة التالية.
3. يُسجَّل **تفصيل الاستنفاد** لكل بند بيع: أي دفعة استُخدمت وبأي كمية وبأي كلفة.
4. يُحسب تكلفة البضاعة المباعة (COGS) بناءً على الكلفة الفعلية لكل دفعة، وليس متوسطاً تقريبياً.

> **مثال:** لديك 10 وحدات بكلفة 500 دينار (دفعة قديمة) و20 وحدة بكلفة 600 دينار (دفعة جديدة). عند بيع 15 وحدة: تُخصم 10 من الدفعة القديمة (كلفة 5,000) ثم 5 من الجديدة (كلفة 3,000). تكلفة البضاعة المباعة = 8,000 دينار.

### 8.7 ما يحدث في الخلفية عند البيع

عند تأكيد عملية البيع، ينفذ النظام 10 خطوات داخلية:

1. **فحص منع التكرار** — التأكد من عدم تكرار نفس العملية.
2. **التحقق من صحة البيانات** — التحقق من الكميات والأسعار والمبالغ.
3. **فحص المخزون** — التأكد من توفر الكمية عبر نظام الدفعات.
4. **حساب المجاميع** — المجموع الفرعي والخصم والضريبة والفائدة والمجموع النهائي.
5. **إنشاء سجل البيع** — حفظ بيانات الفاتورة.
6. **استنفاد FIFO** — خصم الكميات من الدفعات بترتيب الأقدم أولاً مع تسجيل التفاصيل.
7. **حركات المخزون** — إنشاء حركة خروج لكل دفعة مستنفدة.
8. **تسجيل الدفعة المالية** — إذا دُفع مبلغ، يُسجَّل كدفعة.
9. **قيد محاسبي تلقائي**:
   - **دائن:** حساب الإيرادات (بقيمة البيع)
   - **مدين:** حساب الصندوق (بالمبلغ المدفوع نقداً) + حساب ذمم العملاء (بالمبلغ الآجل)
   - **مدين:** حساب تكلفة البضاعة / **دائن:** حساب المخزون (بتكلفة البضاعة المباعة الفعلية)
10. **كشف حساب العميل** — إذا كان هناك مبلغ آجل، يُضاف كقيد في كشف حساب العميل.

---

## 9. الإلغاء والاسترجاع

### 9.1 إلغاء عملية بيع

> متاح لدور **المدير** و**المشرف** فقط.

1. افتح **المبيعات** ← اختر الفاتورة المطلوبة.
2. اضغط **إلغاء البيع**.
3. أكد العملية.

### 9.2 ما يحدث عند الإلغاء

ينفذ النظام جميع الخطوات التالية ضمن عملية واحدة غير قابلة للتجزئة:

| الخطوة                      | التفصيل                                                                                                                         |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **1. استعادة المخزون**      | يقرأ النظام تفاصيل الاستنفاد الأصلية (أي دفعة بأي كمية) ويعيد كل كمية إلى **نفس الدفعة** بالضبط. هذا يضمن دقة FIFO بعد الإلغاء. |
| **2. عكس القيود المحاسبية** | يُنشئ قيداً عكسياً لكل قيد أصلي مرتبط بالبيع (عكس المدين والدائن).                                                              |
| **3. تحديث ذمم العميل**     | إذا كان هناك مبلغ آجل، يُخفَّض رصيد ذمة العميل بقيمة المبلغ المتبقي.                                                            |
| **4. تغيير الحالة**         | تتحول حالة الفاتورة إلى «ملغاة».                                                                                                |
| **5. سجل التدقيق**          | يُسجَّل الإلغاء بجميع تفاصيله في سجل التدقيق.                                                                                   |

### 9.3 استرجاع عملية بيع

يعمل الاسترجاع بنفس آلية الإلغاء تماماً، مع تسجيل السبب كـ«استرجاع» بدلاً من «إلغاء».

> **ملاحظة مهمة:** لا يمكن إلغاء عملية بيع أُلغيت مسبقاً. النظام يتحقق من حالة الفاتورة قبل تنفيذ الإلغاء.

---

## 10. المحاسبة

### 10.1 تفعيل وحدة المحاسبة

وحدة المحاسبة اختيارية ويمكن تفعيلها من معالج الإعداد الأولي أو من إعدادات النظام. عند تفعيلها:

- تُنشأ القيود المحاسبية تلقائياً مع كل عملية بيع وشراء وتعديل مخزون.
- تتوفر شاشات التقارير المالية والترحيل.

### 10.2 دليل الحسابات (شجرة الحسابات)

يأتي النظام بدليل حسابات افتراضي يتضمن:

| الرمز | اسم الحساب              | النوع    |
| ----- | ----------------------- | -------- |
| 1001  | الصندوق (النقدية)       | أصول     |
| 1100  | ذمم العملاء (المدينون)  | أصول     |
| 1200  | المخزون                 | أصول     |
| 2100  | ذمم الموردين (الدائنون) | التزامات |
| 4001  | إيرادات المبيعات        | إيرادات  |
| 5001  | تكلفة البضاعة المباعة   | مصروفات  |

يمكن الوصول إلى دليل الحسابات من **المحاسبة** ← **دليل الحسابات**. يدعم النظام الحسابات الفرعية (شجرة هرمية) ويعرض لكل حساب: الرمز، الاسم بالعربية والإنجليزية، النوع، الرصيد الحالي، وحالة النشاط.

### 10.3 القيود اليومية

يمكن مراجعة جميع القيود المحاسبية من **المحاسبة** ← **القيود اليومية**.

لكل قيد يُعرض:

- رقم القيد والتاريخ
- الوصف ومصدر القيد (بيع، شراء، دفعة، تعديل، يدوي)
- حالة الترحيل (مرحّل أم لا)
- المبلغ الإجمالي
- بنود القيد: الحساب، المبلغ المدين، المبلغ الدائن

**القيود تُنشأ تلقائياً عند:**

- كل عملية بيع (إيراد + تكلفة بضاعة)
- كل عملية شراء (مخزون + نقدية/ذمم)
- كل دفعة مالية (نقدية + ذمم)
- كل تعديل مخزون (مخزون + مصروف تلف أو إيراد)
- إلغاء أو استرجاع بيع (قيد عكسي)

### 10.4 الترحيل (Posting)

الترحيل هو عملية نقل القيود من حالة المسودة إلى الحالة النهائية لفترة زمنية محددة:

1. انتقل إلى **المحاسبة** ← **الترحيل**.
2. حدد:
   - **نوع الفترة**: يومي، شهري، أو سنوي
   - **تاريخ البداية** و**تاريخ النهاية**
   - **ملاحظات** (اختياري)
3. اضغط **ترحيل**.

**شروط الترحيل:**

- يجب أن يكون هناك قيد واحد على الأقل غير مرحّل في الفترة المحددة.
- جميع القيود يجب أن تكون **متوازنة** (مجموع المدين = مجموع الدائن).
- جميع القيود يجب أن تحتوي على بنود.

عند الترحيل:

- تُنشأ **دفعة ترحيل** بحالة «مرحّل» مع عدد القيود والمبلغ الإجمالي.
- تتحول جميع القيود في الفترة إلى حالة «مرحّل».

### 10.5 عكس قيد مرحّل

إذا اكتشفت خطأ في قيد مرحّل:

1. افتح القيد من **القيود اليومية**.
2. اضغط **عكس القيد**.
3. يُنشئ النظام قيداً عكسياً جديداً بعكس المدين والدائن.

**شروط العكس:**

- القيد يجب أن يكون مرحّلاً.
- القيد يجب ألا يكون معكوساً مسبقاً.
- دفعة الترحيل التي ينتمي إليها القيد يجب ألا تكون **مقفلة**.

### 10.6 الإقفال (Locking)

بعد مراجعة دفعة ترحيل والتأكد من صحتها، يمكن **إقفالها**. الإقفال يمنع:

- عكس أي قيد ينتمي لهذه الدفعة.
- أي تعديل على القيود المنتمية لها.

هذا يضمن سلامة البيانات المالية للفترات المقفلة.

### 10.7 التقارير المالية

#### ميزان المراجعة (Trial Balance)

يعرض جميع الحسابات مع أرصدتها المدينة والدائنة. يجب أن يتساوى مجموع الأرصدة المدينة مع الدائنة.

**المسار:** المحاسبة ← ميزان المراجعة

#### الأرباح والخسائر (Profit & Loss)

يعرض إيرادات الفترة مطروحاً منها المصروفات لحساب صافي الربح أو الخسارة.

**المسار:** المحاسبة ← الأرباح والخسائر

| البند                   | المصدر           |
| ----------------------- | ---------------- |
| إيرادات المبيعات        | حساب 4001        |
| − تكلفة البضاعة المباعة | حساب 5001        |
| = مجمل الربح            |                  |
| − المصروفات الأخرى      | حسابات المصروفات |
| = صافي الربح / الخسارة  |                  |

#### الميزانية العمومية (Balance Sheet)

تعرض أصول الشركة والتزاماتها وحقوق الملكية في لحظة معينة.

**المسار:** المحاسبة ← الميزانية العمومية

---

## 11. العملاء والموردون

### 11.1 إدارة العملاء

#### إنشاء عميل جديد

1. انتقل إلى **العملاء** ← **إضافة عميل**.
2. أدخل البيانات:

| الحقل      | مطلوب؟ | الوصف             |
| ---------- | :----: | ----------------- |
| الاسم      |   ✓    | اسم العميل الكامل |
| رقم الهاتف |        | رقم التواصل       |
| العنوان    |        | عنوان العميل      |
| المدينة    |        | المدينة           |
| ملاحظات    |        | أي ملاحظات إضافية |

3. اضغط **حفظ**.

#### ملف العميل

يعرض ملف العميل:

- بياناته الشخصية
- إجمالي مشترياته
- إجمالي ذممه (الديون المستحقة)
- سجل عملياته (الفواتير والمدفوعات)

#### تسجيل دفعة على ذمة عميل

1. افتح فاتورة بيع آجلة أو مختلطة.
2. اضغط **تسجيل دفعة**.
3. أدخل المبلغ المدفوع.
4. اختر طريقة الدفع.
5. اضغط **تأكيد**.

يتم تلقائياً:

- تسجيل الدفعة المالية.
- تحديث رصيد الذمة على الفاتورة.
- إنشاء قيد في كشف حساب العميل.
- إنشاء قيد محاسبي (مدين: الصندوق / دائن: ذمم العملاء).

#### تسوية الذمم

يعرض كشف حساب العميل جميع الحركات:

| نوع الحركة | التأثير                   |
| ---------- | ------------------------- |
| فاتورة     | زيادة الذمة               |
| دفعة       | تخفيض الذمة               |
| استرجاع    | تخفيض الذمة               |
| تعديل      | زيادة أو تخفيض حسب القيمة |

### 11.2 إدارة الموردين

#### إنشاء مورد جديد

1. انتقل إلى **الموردين** ← **إضافة مورد**.
2. أدخل البيانات (الاسم مطلوب، الهاتف والعنوان اختياريان).
3. يمكن إدخال **رصيد افتتاحي** إذا كان هناك ذمة سابقة.
4. اضغط **حفظ**.

#### تفاصيل المورد

يعرض:

- بيانات المورد
- الرصيد الحالي (المستحق للمورد)
- سجل الفواتير والمدفوعات

#### تسجيل دفعة للمورد

1. افتح فاتورة شراء غير مسددة بالكامل.
2. اضغط **تسجيل دفعة**.
3. أدخل المبلغ.
4. اضغط **تأكيد**.

يُنشأ تلقائياً: دفعة مالية، قيد في كشف حساب المورد، وقيد محاسبي.

---

## 12. نظام الباركود

### 12.1 إنشاء قالب باركود

1. انتقل إلى **المنتجات** ← **مصمم قوالب الباركود**.
2. اضغط **قالب جديد**.
3. أدخل:
   - اسم القالب
   - أبعاد الملصق (العرض والارتفاع بالمليمتر)
   - صيغة الباركود (Code 128، EAN-13، أو QR)

### 12.2 تصميم القالب

- **لوحة التصميم:** تعرض منطقة تصميم الملصق بالحجم الفعلي.
- يمكنك إضافة عناصر إلى الملصق:

| العنصر         | الوصف               |
| -------------- | ------------------- |
| باركود         | رسم الباركود نفسه   |
| اسم المنتج     | نص اسم المنتج       |
| السعر          | سعر البيع           |
| تاريخ الانتهاء | تاريخ صلاحية المنتج |

- لكل عنصر يمكن تحديد: الموقع (أفقي وعمودي)، الأبعاد، حجم الخط، والتنسيق.
- يمكن تعيين قالب واحد كـ**افتراضي**.

### 12.3 طباعة ملصقات الباركود

1. انتقل إلى **المنتجات** ← **طباعة الباركود**.
2. اختر المنتج والقالب المطلوب.
3. حدد عدد النسخ.
4. اضغط **طباعة**.

يُنشأ **مهمة طباعة** بحالة «قيد الانتظار» ويتم تنفيذها تلقائياً. يمكنك متابعة حالة المهمة:

- قيد الانتظار → جارية → مكتملة (أو فاشلة مع سبب الخطأ).

---

## 13. التقارير ولوحة التحكم

### 13.1 لوحة التحكم (Dashboard)

تعرض لوحة التحكم ملخصاً سريعاً للعمليات اليومية:

| البطاقة              | المحتوى                                   |
| -------------------- | ----------------------------------------- |
| مبيعات اليوم         | إجمالي قيمة مبيعات اليوم الحالي           |
| المخزون المنخفض      | عدد المنتجات التي وصل مخزونها للحد الأدنى |
| أكثر المنتجات مبيعاً | أعلى 5 منتجات مبيعاً                      |

يتم تحديث البيانات تلقائياً عند فتح اللوحة.

### 13.2 تقارير المبيعات

من **المبيعات** يمكنك:

- استعراض جميع الفواتير مع تصفية حسب الحالة والتاريخ والعميل.
- عرض تفاصيل كل فاتورة مع بنودها وتكلفة البضاعة وهامش الربح.
- كل فاتورة تعرض: تفصيل الاستنفاد من الدفعات (أي دفعة × أي كمية × أي كلفة).

### 13.3 تقارير المخزون

من **المخزون** ← **لوحة المخزون** يمكنك الاطلاع على:

- إجمالي قيمة المخزون (الكمية × الكلفة لكل منتج).
- عدد المنتجات ذات المخزون المنخفض.
- تنبيهات قرب انتهاء الصلاحية.
- أكثر المنتجات حركة.

### 13.4 التقارير المحاسبية

راجع القسم 10.7 للتفاصيل الكاملة حول:

- ميزان المراجعة
- الأرباح والخسائر
- الميزانية العمومية

---

## 14. سجل التدقيق (Audit Log)

### 14.1 ما هو سجل التدقيق؟

سجل التدقيق هو سجل دائم لا يمكن تعديله يحفظ كل إجراء يتم تنفيذه في النظام. يُعد أداة أساسية للمراقبة ومنع التلاعب.

### 14.2 ما يُسجَّل

كل سجل يتضمن:

| الحقل         | الوصف                                                  |
| ------------- | ------------------------------------------------------ |
| المستخدم      | من نفّذ الإجراء                                        |
| الإجراء       | نوع العملية (إنشاء بيع، تعديل منتج، إلغاء فاتورة، إلخ) |
| الكيان        | نوع السجل المتأثر (بيع، منتج، مستخدم، إلخ)             |
| معرف الكيان   | رقم السجل المتأثر                                      |
| التوقيت       | التاريخ والوقت بالثانية                                |
| التغييرات     | الحقول التي تغيرت مع القيمة القديمة والجديدة           |
| وصف التغيير   | شرح مقروء للتعديل                                      |
| بيانات إضافية | معلومات سياقية (رقم الفاتورة، السبب، إلخ)              |

### 14.3 كيفية قراءة السجل

1. انتقل إلى **سجل التدقيق** (متاح للمدير والمشرف فقط).
2. يُعرض السجل بترتيب زمني عكسي (الأحدث أولاً).
3. يمكنك التصفية حسب المستخدم أو نوع الإجراء أو الفترة الزمنية.
4. لكل سجل يمكنك الضغط على **التفاصيل** لمشاهدة التغييرات الدقيقة.

**أمثلة على إجراءات مسجلة:**

- «أنشأ المستخدم أحمد فاتورة بيع رقم INV-0042 بمبلغ 125,000 دينار»
- «عدّل المستخدم محمد سعر بيع المنتج "أرز 10 كغ" من 15,000 إلى 16,000 دينار»
- «ألغى المستخدم أحمد فاتورة بيع رقم INV-0038 — تم استعادة 5 وحدات إلى الدفعة B-12»

---

## 15. النسخ الاحتياطي والاستعادة

> جميع عمليات النسخ الاحتياطي متاحة **للمدير فقط**.

### 15.1 إنشاء نسخة احتياطية

1. انتقل إلى **النسخ الاحتياطي**.
2. اضغط **إنشاء نسخة احتياطية**.
3. يقوم النظام بـ:
   - ضغط قاعدة البيانات (عملية VACUUM).
   - نسخ الملف إلى مجلد النسخ الاحتياطي.
   - التحقق من سلامة النسخة.
4. يظهر اسم النسخة (بصيغة: backup-YYYYMMDD-HHMMSS).

### 15.2 استعادة قاعدة البيانات

> **تنبيه:** الاستعادة تستبدل جميع البيانات الحالية بالبيانات الموجودة في النسخة الاحتياطية.

1. اختر النسخة المطلوبة من القائمة.
2. اضغط **استعادة**.
3. يُنشئ النظام تلقائياً **نسخة طوارئ** من البيانات الحالية قبل الاستعادة.
4. تتم الاستعادة ويُطلب منك **إعادة تشغيل التطبيق**.

**إجراءات الأمان المدمجة:**

- كل عملية استعادة تتطلب **رمز تحقق مؤقت** صالح لمدة 60 ثانية فقط.
- يُنشأ نسخة طوارئ تلقائياً قبل كل استعادة.
- لا يمكن حذف نسخ الطوارئ.

### 15.3 سياسة الاحتفاظ

- يحتفظ النظام بالنسخ الاحتياطية لمدة **30 يوماً**.
- تُحذف النسخ الأقدم تلقائياً بعد كل عملية نسخ احتياطي جديدة.
- يعرض النظام إحصائيات: عدد النسخ الإجمالي، الحجم الكلي، أقدم وأحدث نسخة.

### 15.4 أفضل ممارسات النسخ الاحتياطي

- أنشئ نسخة احتياطية **يومياً** على الأقل.
- أنشئ نسخة احتياطية **قبل أي تحديث للنظام**.
- انسخ ملف النسخة الاحتياطية إلى **قرص خارجي أو خدمة سحابية** بشكل دوري.
- اختبر الاستعادة بشكل دوري للتأكد من صلاحية النسخ.

---

## 16. الأخطاء الشائعة وحلولها

### 16.1 خطأ: مخزون غير كافٍ (INSUFFICIENT_STOCK)

**الوصف:** يظهر عند محاولة بيع كمية تتجاوز المخزون المتوفر في الدفعات النشطة.

**الأسباب المحتملة:**

- المخزون الفعلي أقل من الكمية المطلوبة.
- المنتج ليس لديه دفعات نشطة (حتى لو كان رصيده يبدو كافياً).

**الحل:**

1. تحقق من رصيد المنتج في شاشة تفاصيل المنتج (تبويب الدفعات).
2. إذا كان هناك مخزون بدون دفعات، نفّذ **تعديل مخزون** بسبب «رصيد افتتاحي» لإنشاء دفعة.
3. إذا نفد المخزون فعلاً، أنشئ فاتورة شراء لإدخال كميات جديدة.

### 16.2 مشاكل الطباعة

**لا يُطبع الإيصال:**

- تأكد من اختيار الطابعة الصحيحة في الإعدادات.
- تأكد من أن الطابعة متصلة ومشغّلة.
- تأكد من وجود ورق في الطابعة.

**الطباعة مشوهة:**

- تأكد من اختيار حجم الورق الصحيح (حراري 58 مم أو 80 مم).
- تأكد من اتجاه التخطيط (RTL للعربية).

### 16.3 أخطاء الترحيل

**«لا توجد قيود غير مرحّلة»:**

- جميع القيود في الفترة المحددة مرحّلة مسبقاً. اختر فترة مختلفة.

**«القيود غير متوازنة»:**

- أحد القيود في الفترة المحددة مجموع المدين فيه لا يساوي الدائن. راجع القيود اليومية وصحح الخطأ.

### 16.4 مشاكل الصلاحيات

**«ليس لديك صلاحية»:**

- الإجراء المطلوب غير متاح لدورك. تواصل مع المدير لمنحك الصلاحية المطلوبة أو اطلب من مستخدم بصلاحية مناسبة تنفيذ الإجراء.

### 16.5 خطأ في قاعدة البيانات

**«فشل تهيئة قاعدة البيانات»:**

- قد تكون قاعدة البيانات تالفة. استعد من آخر نسخة احتياطية.
- إذا لم تتوفر نسخة احتياطية، تواصل مع الدعم الفني.

---

## 17. أفضل الممارسات التشغيلية

### 17.1 إدارة الدفعات بفعالية

- **سجّل كل عملية شراء عبر النظام** — لا تضف كميات يدوياً إلا للرصيد الافتتاحي. فواتير الشراء تنشئ الدفعات تلقائياً بالكلفة الصحيحة وتاريخ الصلاحية.
- **تحقق من الدفعات دورياً** — افتح تفاصيل المنتج وراجع تبويب الدفعات للتأكد من دقة الأرصدة.
- **استخدم المراجعة الدورية** — نفّذ «مراجعة تطابق المخزون» أسبوعياً على الأقل لاكتشاف أي فروقات.

### 17.2 منع التلاعب

- **حدد صلاحيات كل مستخدم بدقة** — لا تمنح صلاحيات المدير إلا لمن يحتاجها فعلاً.
- **راجع سجل التدقيق دورياً** — ابحث عن أي إلغاءات أو تعديلات غير مبررة.
- **أنشئ نسخاً احتياطية منتظمة** — تحمي من فقدان البيانات أو التلاعب.
- **لا تشارك كلمات المرور** — كل مستخدم يجب أن يكون له حساب خاص.
- **ألغِ تفعيل المستخدمين المغادرين فوراً** — عند مغادرة أي موظف، ألغِ تفعيل حسابه.

### 17.3 تنظيم العمل بين الكاشير والمحاسب

| المهمة                  | المسؤول           | التكرار            |
| ----------------------- | ----------------- | ------------------ |
| عمليات البيع اليومية    | الكاشير           | يومياً             |
| تسجيل المشتريات         | المشرف أو المدير  | عند كل عملية شراء  |
| مراجعة القيود المحاسبية | المحاسب           | يومياً أو أسبوعياً |
| ترحيل القيود            | المحاسب           | يومياً أو شهرياً   |
| مراجعة تطابق المخزون    | المشرف            | أسبوعياً           |
| النسخ الاحتياطي         | المدير            | يومياً             |
| مراجعة سجل التدقيق      | المدير            | أسبوعياً           |
| تقارير الأرباح والخسائر | المحاسب أو المدير | شهرياً             |

### 17.4 نصائح عامة

- **ابدأ بالبيانات الأساسية أولاً:** سجّل التصنيفات، ثم المنتجات، ثم الأرصدة الافتتاحية قبل بدء العمليات اليومية.
- **استخدم التصنيفات لتنظيم المنتجات:** يسهّل عملية البحث والتصفية في شاشة البيع.
- **سجّل العملاء للبيع بالآجل فقط:** لست بحاجة لتسجيل كل عميل نقدي.
- **فعّل تتبع الصلاحية للمنتجات القابلة للتلف فقط:** تجنب تعقيد العمليات للمنتجات التي لا تنتهي صلاحيتها.

---

## 18. الأسئلة المتكررة (FAQ)

**س: هل يحتاج النظام اتصالاً بالإنترنت؟**
ج: لا. النظام يعمل بشكل كامل بدون إنترنت. قاعدة البيانات محلية على جهازك.

**س: هل يمكن تشغيل النظام على أكثر من جهاز؟**
ج: النظام مصمم كتطبيق سطح مكتب مستقل. كل جهاز يعمل بقاعدة بيانات منفصلة.

**س: ما العملات المدعومة؟**
ج: العملة الأساسية هي الدينار العراقي (IQD). يدعم النظام أيضاً: الدولار الأمريكي (USD)، اليورو (EUR)، الجنيه الإسترليني (GBP)، الريال السعودي (SAR)، الدرهم الإماراتي (AED)، الجنيه المصري (EGP)، الدينار الأردني (JOD)، والدينار الكويتي (KWD).

**س: لماذا جميع المبالغ أعداد صحيحة؟**
ج: يستخدم النظام الأعداد الصحيحة (بدون كسور عشرية) في جميع العمليات المالية لتجنب أخطاء التقريب. هذا هو المعيار العالمي في الأنظمة المالية الاحترافية. بما أن أصغر وحدة للدينار العراقي هي الدينار الواحد، فلا حاجة للكسور العشرية.

**س: ماذا يحدث إذا تعطل الجهاز أثناء عملية بيع؟**
ج: النظام يستخدم آلية **المعاملات الذرية** — إما تُنفَّذ جميع خطوات العملية بالكامل أو لا تُنفَّذ أي خطوة. لن تبقى بيانات جزئية. بالإضافة لذلك، يمنع مفتاح عدم التكرار تنفيذ نفس العملية مرتين.

**س: هل يمكن تعديل فاتورة بعد إنشائها؟**
ج: لا يمكن تعديل الفاتورة بعد الإنشاء لضمان سلامة السجلات. يمكنك إلغاؤها وإنشاء فاتورة جديدة.

**س: كيف أنقل البيانات إلى جهاز جديد؟**
ج: أنشئ نسخة احتياطية من الجهاز القديم، وانسخ الملف إلى الجهاز الجديد، ثم استخدم خاصية الاستعادة.

**س: ماذا إذا نسيت كلمة المرور؟**
ج: تواصل مع مستخدم بصلاحيات المدير ليعيد تعيين كلمة مرورك. إذا كنت المدير الوحيد، ستحتاج للتواصل مع الدعم الفني.

**س: هل يمكن استرجاع بيانات بعد الحذف؟**
ج: المنتجات والعملاء لا تُحذف فعلياً إذا كان لها سجل عمليات، بل تُلغى تفعيلها فقط. القيود المحاسبية لا تُحذف أبداً بل تُعكس. لاستعادة بيانات محذوفة فعلياً، استخدم النسخ الاحتياطي.

**س: كيف أفعّل وحدة المحاسبة بعد الإعداد الأولي؟**
ج: انتقل إلى الإعدادات ← إعدادات المحاسبة وفعّل الخيارات المطلوبة. سيبدأ النظام بإنشاء القيود المحاسبية تلقائياً مع العمليات الجديدة.

**س: هل يمكن تغيير أسعار المنتجات بشكل جماعي؟**
ج: حالياً يمكن تعديل سعر كل منتج على حدة من شاشة تعديل المنتج.

**س: ماذا يعني «مرحّل» و«غير مرحّل» في القيود المحاسبية؟**
ج: القيد «غير المرحّل» هو بمثابة مسودة يمكن مراجعتها وتصحيحها. عند الترحيل، يصبح القيد نهائياً ويُحتسب في التقارير المالية. بعد إقفال الفترة، لا يمكن تعديل القيود المنتمية لها.

---

**نهاية الدليل**

للحصول على الدعم الفني أو الإبلاغ عن مشكلة، يرجى التواصل مع فريق نقطة بلس.

</div>
